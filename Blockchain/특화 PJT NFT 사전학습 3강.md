# 특화 PJT NFT 사전학습 3강

> Solidity 기본 문법

목차

1. 솔리디티 컨트랙트 기본 구조

2. 예제로 기본 문법 익히기

   자료형, 접근 제어자, 자주 쓰는 자료형

   사용자 선언형, 함수, 제어문, 화폐 단위



## 1. 솔리디티 컨트랙트 기본 구조

### 솔리디티 소스 파일 레이아웃 

제일 위

```solidity
// SPDX-License-Identifier: GPL-3.0
pragma solidity >=0.7.0 <0.9.0;
```

- 소스코드 라이선스를 GPL-3.0으로 명시
- Version Pragma : 소스코드가 이용하는 컴파일러 버전 명시
  - Sematic versioning을 따름. `major.minor.patch`
  - ^ (캐럿 연산자) : '이상'

### 컨트랙트 구조

**컨트랙트**

```
contract Stroage {

}
```

**상태 변수 State Variable**

- 블록체인(contract storage)에 값이 저장되는 변수
- 상태 변수의 접근 제어자(Visibility) 지정 가능, `external`, `public`, `private`
- 기본형, 구조체, 배열 등 다양한 자료형 존재

**함수**

- 컨트랙트 단위 기능
- 매개 변수, 제어자, 반환값 지정 가능
- 함수 내부에서 상태 변수의 값을 변경하고 읽을 수 있음.

## 2. 예제로 기본 문법 익히기

### 자료형

#### 기본형 Primitives

- 논리형
  - bool: true or false
- 정수형
  - uint: unsigned integer
  - int : signed integer
  - 8 ~ 256 bit 표현, uint은 uint256과 같음

- 주소형
  - address: 이더리움의 주소 표현
- 바이트형
  - bytes# or byte[] : 데이터를 바이트로 표현

#### 접근 제어자 Visibility

|                 |           `private`           |                  `internal`                   |                           `public`                           |             `external`             |
| :-------------: | :---------------------------: | :-------------------------------------------: | :----------------------------------------------------------: | :--------------------------------: |
|      설명       | - 컨트랙트 내에서만 접근 가능 | - 현재 컨트랙트와 자식 컨트랙트에서 접근 가능 | 현재 컨트랙트, 자식 컨트랙트, 외부 컨트랙트 및 주소에서 접근 가능 | 외부 컨트랙트와 주소에서 접근 가능 |
| State Variables |               O               |                       X                       |                              O                               |                 O                  |
|    Functions    |               O               |                       O                       |                              O                               |                 O                  |

#### 배열 Array

- 고정 길이와 유동적 길이를 갖는 배열
- 배열형 자료 구조 다루기
- index에 접근
- `push` `pop` `delete`
- 함수 내 로컬 변수로 배열 사용하기 위해서는 고정 길이로 선언해야 함.



#### 매핑 Mapping

- 매핑형 선언 방법
- 접근, 추가, 삭제 방법
- 매핑에 저장된 key의 목록을 얻을 수 있는 방법을 제공하지 않음.

#### 사용자 선언 자료형 Struct

- 여러 자료형을 하나의 관점으로 묶어서 관리하고자 할 때 선언

  ```solidity
  struct Todo {
  	string text;
  	bool completed;
  }
  ```

- 구조체의 Array, Mapping의 값으로 지정 가능
- 구조체 생성, 접근, 변경 방법
- 함수 안에서 struct 상태 변수를 참조하는 방법



#### 함수

- 함수 선언 방법

  매개변수 유무, 반환 값 유무

  `view`, `pure` 함수의 특징

  - `view` : 불러온 상태 변수를 변경하지 않고 읽기만 하는 함수. 가스가 없어도 호출할 수 있는 함수.
  - `pure` :  상태 변수를 변경하지도, 읽지도 않는 함수.
  - 경제적 프로그래밍의 필요성

- 2개 이상의 값을 반환하도록 선언하는 방법

### 제어문

- 조건문 if-else, 삼항 연산자 ? :
- 반복문 for / while

이더리움이 튜링 완전 머신일 수 있는 이유는 반복문이 있기 때문이다. 기존 비트코인은 반복문이 없었다. 전세계 여러 컴퓨터에서 같은 코드가 돌아가는 블록 체인 특성 상 반복문은 큰 리스크를 안고 있다. 무한 루프에 빠지는 반복문을 실행할 경우, 모든 컴퓨터가 무한 루프에 빠질 수 있다. 이더리움은 이러한 문제는 gas를 이용해 막았다. maxGasLimit를 정해 일정 이상 gas가 소모되면 중지된다.

